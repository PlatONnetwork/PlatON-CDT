macro(add_contract CONTRACT_NAME TARGET)
  add_executable(${TARGET} ${ARGN})
  target_compile_options(${TARGET} PUBLIC -abigen)
  get_target_property(BINOUTPUT ${TARGET} BINARY_DIR)
  target_compile_options(${TARGET} PUBLIC -abigen_output=${BINOUTPUT}/${TARGET}.abi.json)
  target_compile_options(${TARGET} PUBLIC -exports_output=${BINOUTPUT}/${TARGET}.exports)
  target_link_options(${TARGET} PUBLIC -export-file=${BINOUTPUT}/${TARGET}.exports)
endmacro(add_contract)
